<html>
<head>
	<title>CSS Icon Builder</title>
	<link rel="stylesheet" href="./style/style.css" type="text/css"/>
	<link rel="stylesheet" href="./style/icons.css" type="text/css"/>
	<script type="text/javascript">
	var canvas;
	var context;
	var animationID;

	var x = 30, y = 30;

	var WIDTH = 500;
	var HEIGHT = 500;

	function start() {
		canvas = document.getElementById("editor");
		canvas.onmousedown = mouseDown;
		canvas.onmouseup = mouseUp;
		context = canvas.getContext("2d");
		drawCorner();
		drawHorizontalRuler();
		drawVerticalRuler();
		animationID = requestAnimationFrame(draw);
	}

	function draw() {
		context.clearRect(20, 20, WIDTH, HEIGHT);
		drawRect(x, y, "#5AE09E");
		drawRect(100, 150, "#E07760");
		animationID = requestAnimationFrame(draw);
	}

	function drawHorizontalRuler() {
		context.fillStyle = "#222";
		context.beginPath();
		context.rect(20, 0, WIDTH, 20);
		context.closePath();
		context.fill();

		context.strokeStyle = "#999";
		context.lineWidth = 1;
		context.beginPath();
		for (var i = 0; i <= 10; i++) {
			// Full Bar
			context.moveTo(20 + i*WIDTH/10, 0);
			context.lineTo(20 + i*WIDTH/10, 20);
			// Half Bar
			context.moveTo(20 + (i+0.5)*HEIGHT/10, 10);
			context.lineTo(20 + (i+0.5)*HEIGHT/10, 20);
			// Quarter Bar
			context.moveTo(20 + (i+0.25)*HEIGHT/10, 15);
			context.lineTo(20 + (i+0.25)*HEIGHT/10, 20);
			context.moveTo(20 + (i+0.75)*HEIGHT/10, 15);
			context.lineTo(20 + (i+0.75)*HEIGHT/10, 20);
		}
		context.stroke();

		context.fillStyle = "#999";
		context.font = "12px Arial";
		for (var i = 0; i < 10; i++) {
			var temp = "0" + (i>0?("."+i):"");
			context.fillText(temp, 25 + i*WIDTH/10, 12);
		}
	}

	function drawVerticalRuler() {
		context.fillStyle = "#222";
		context.beginPath();
		context.rect(0, 20, 20, HEIGHT);
		context.closePath();
		context.fill();

		context.strokeStyle = "#999";
		context.lineWidth = 1;
		context.beginPath();
		for (var i = 0; i <= 10; i++) {
			// Full Bar
			context.moveTo(0, 20 + i*HEIGHT/10);
			context.lineTo(20, 20 + i*HEIGHT/10);
			// Half Bar
			context.moveTo(10, 20 + (i+0.5)*HEIGHT/10);
			context.lineTo(20, 20 + (i+0.5)*HEIGHT/10);
			// Quarter Bar
			context.moveTo(15, 20 + (i+0.25)*HEIGHT/10);
			context.lineTo(20, 20 + (i+0.25)*HEIGHT/10);
			context.moveTo(15, 20 + (i+0.75)*HEIGHT/10);
			context.lineTo(20, 20 + (i+0.75)*HEIGHT/10);
		}
		context.stroke();

		context.save();
		context.rotate(90*Math.PI/180);
		context.fillStyle = "#999";
		context.font = "12px Arial";
		for (var i = 0; i < 10; i++) {
			var temp = "0" + (i>0?("."+i):"");
			context.fillText(temp, 25 + i*WIDTH/10, -2);
		}
		context.restore();
	}

	function drawCorner() {
		context.fillStyle = "#222";
		context.beginPath();
		context.rect(0, 0, 20, 20);
		context.closePath();
		context.fill();
	}

	function drawRect(x, y, color) {
		context.fillStyle = color;
		context.beginPath();
		context.rect(x, y, 100, 30);
		context.closePath();
		context.fill();
	}

	function mouseDown(e) {
		x = e.pageX - canvas.offsetLeft;
		y = e.pageY - canvas.offsetTop;
		canvas.onmousemove = mouseMove;
	}

	function mouseUp(e) {
		canvas.onmousemove = null;
	}

	function mouseMove(e) {
		x = e.pageX - canvas.offsetLeft;
		y = e.pageY - canvas.offsetTop;
	}
	</script>
</head>

<body>
	<header>
		<h1>CSS Icon Builder</h1>
	</header>

	<nav>
		<div>File</div>
		<div>Help</div>
	</nav>

	<aside class="tools">
		<div title="Rectangle"><i class="tool_icon_rectangle"></i></div>
		<div title="Circle"><i class="tool_icon_circle"></i></div>
	</aside>

	<div class="centerArea">
		<canvas id="editor" width="520" height="520">
			Your browser doesn't support HTML5 canvas.
		</canvas>
	</div>

	<aside class="layers">
		<h2>Layers</h2>
		<div>Main Layer</div>
		<div>:before Layer</div>
		<div>:after Layer</div>
	</aside>

	<script type="text/javascript">
	start();
	</script>
</body>

</html>
